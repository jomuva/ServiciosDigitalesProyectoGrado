@model ServiciosDigitalesProy.Models.Factura

@{
    ViewBag.Title = " Ventas";
    ViewBag.SubSeccion = "Crear Factura";
}

<h3>@ViewBag.SubSeccion</h3>
<div class="col-lg-12">
    <!--breadcrumbs start -->
    <ul class="breadcrumb">
        <li><a href="#"><i class="fa fa-th-list"></i>@ViewBag.Title</a></li>
        <li class="active"><a href="#">@ViewBag.SubSeccion</a></li>
    </ul>
    <!--breadcrumbs end -->
</div>
<style>
    .form-horizontal .control-label {
        text-align: left;
    }

    textarea {
        width: 400px;
        height: 100px;
    }
</style>

<div class="row">
    @*@using (Html.BeginForm("GenerarSolicitud", "Solicitudes"))
    {*@

        @Html.Partial("Partials/_ModalBuscarCliente")
        @Html.AntiForgeryToken()
        <!-- /.INICIO DE ENCABEZADO FACTURA -->
        <div class="form-horizontal col-md-10 col-md-offset-1" style="border-style: solid;">
            <section class="panel">

                <header>
                    <div class="row" style="margin-top: 10px;">
                        @Html.Label("Factura No:", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-3 inputGroupContainer">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-barcode"></i></span>
                                @Html.EditorFor(model => model.id_factura, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                            </div>
                        </div>
                        @Html.Label("Fecha:", htmlAttributes: new { @class = "control-label col-md-1" })
                        <div class="col-md-4 inputGroupContainer">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-barcode"></i></span>
                                @Html.EditorFor(model => model.fecha, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                            </div>
                        </div>
                    </div>

                    <div class="row" style="margin-top: 10px;">
                        <div class="col-md-3">
                            <a class="btn btn-primary" id="btnBuscarCliente" data-toggle="modal" href="#miModalBuscarCliente">
                                Buscar Cliente
                            </a>
                        </div>
                    </div>

                    <div class="row" style="margin-top: 10px;">
                        @Html.Label("Doc Cliente:", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-3 inputGroupContainer">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-barcode"></i></span>
                                @Html.EditorFor(model => model.cliente.identificacion, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                            </div>
                        </div>
                        @Html.Label("Nombre:", htmlAttributes: new { @class = "control-label col-md-1" })
                        <div class="col-md-4 inputGroupContainer">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-barcode"></i></span>
                                @Html.EditorFor(model => model.cliente.NombresApellidos, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                            </div>
                        </div>
                    </div>

                    <div class="row" style="margin-top: 10px;">
                        @Html.Label("Celular:", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-3 inputGroupContainer">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-barcode"></i></span>
                                @Html.EditorFor(model => model.cliente.TelefonoCelular, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                            </div>
                        </div>
                        @Html.Label("Dirección:", htmlAttributes: new { @class = "control-label col-md-1" })
                        <div class="col-md-4 inputGroupContainer">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-barcode"></i></span>
                                @Html.EditorFor(model => model.cliente.direccion, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                            </div>
                        </div>
                    </div>
                </header>
            </section>
        </div>
        <!-- /.FIN DE ENCABEZADO FACTURA -->

        <!-- /.INICIO BOTONES DE ADICION DE ITEMS DE PRODUCTO Y SOLICITUD -->
        <div class="form-horizontal col-md-10 col-md-offset-1" style="border-style: solid;">

            <section>
                @Html.Partial("Partials/_ModalAdicionarProducto")
                <div class="row">
                    <div style="margin-top: 10px;margin-right:-40px;">
                        <div class="col-md-2 pull-left">
                            <a class="btn btn-danger" id="btnAdicionarProducto" data-toggle="modal" href="#miModalAdicionarProducto">
                                Adicionar <b>Producto</b>
                            </a>
                        </div>
                    </div>
                    <div style="margin-top: 10px;margin-bottom:10px;">
                        <div class="col-md-3">
                            <a class="btn btn-warning" id="btnBuscarCliente" data-toggle="modal" href="#miModalBuscarCliente">
                                Adicionar <b>Solicitud</b>
                            </a>
                        </div>
                    </div>
                </div>
            </section>
        </div>
         <!-- /.FIN BOTONES DE ADICION DE ITEMS DE PRODUCTO Y SOLICITUD -->

        <!-- /.INICIO CUERPO DE FACTURA DONDE VAN LOS DETALLES -->
        @using (Html.BeginForm("ConfirmarItems", "Ventas"))
        {
            <div class="form-horizontal col-md-10 col-md-offset-1" style="border-style: solid;">
                <div class="panel-body">

                    <table width="100%" class="table table-striped table-bordered table-hover" id="table-inicial">

                        <thead>
                            <tr>
                                <td>
                                    <b>Cantidad</b>
                                </td>
                                <td>
                                    <b>Descripción</b>
                                </td>
                                <td>
                                    <b>Valor Unitario</b>
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            @for (int i=0;i<Model.listaDetallesProducto.Count;i++)
                            {
                                <tr>
                                    <td>
                                        @Html.TextBoxFor(model => this.Model.listaDetallesProducto[i].cantidad, new { htmlAttributes = new {@class = "form-control", @type = "number" } })
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => this.Model.listaDetallesProducto[i].producto.nombre)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => this.Model.listaDetallesProducto[i].producto.precio_venta)
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>

                </div>
                <div class="row">
                    <div class="form-group">
                        <div class="col-md-offset-2 col-md-2" style="text-align: right;">
                            <input type="submit" id="Generar" value="Generar" class="btn btn-success" />
                        </div>
                        <div class="col-md-2" style="padding-left: 0px;">
                            @Html.ActionLink("Volver", "ConsultarSolicitudes", null, new { @class = "btn btn-primary" })
                        </div>
                    </div>
                </div>
            </div>
        }
@*}*@
</div>
@section Scripts {
    <script src="~/Xcore/Scripts/Modales/ModalElemento.js"></script>
    @Scripts.Render("~/bundles/jqueryval")
}

@if ((string)TempData["mensaje"] != null && (string)TempData["mensaje"] != "")
            {
    <script>
        $(function (msg) {
            $.bootstrapGrowl('@((string)TempData["mensaje"])', {
                type: '@((string)TempData["estado"])',
                offset: { from: 'top', amount: 100 }
            });
        });
    </script>
}
